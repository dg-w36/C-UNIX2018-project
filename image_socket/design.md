## 图像发送端设计思路

本作业的重点在学习 LINUX 下的编程,由于时间有限,通过程序模拟FPGA的数据采集.

通过一个单独的线程,以30帧的速度,不断的从视频中读取帧数据(RGB24 bit),并将其缓存到预设的共享内存中,这个过程完全模拟了FPGA通过DMA将视频数据采集到内存中的过程,这个单独的采集进程模拟了DMA,共享内存则模拟FIFO.

主线程,建立一个socket服务,通过I/O复用的形式建立服务.当有客户端进行连接时,进行连接.服务端只有当客户端有图片请求时,才发出整帧图像数据,虽然socket传送的数据为无格式数据留,但通过限制数据传送必须为申请再返回的形式,在传输中不会出现多帧数据重合的情况,因此并没有对图像数据进行编码,而是直接传输.

## 编译和使用方法

图像发送模块为一个单独编译的模块,使用了opencv, 采用cmake进行编译工程构建.基本测试方法如下:
- 建立 build 用于编译和测试
- 在build文件夹中执行 cmake .. 构建 Makefile
- 执行 make 编译可执行文件.
- 执行可执行文件 ./image 之后改程序会读取文件家中放置的视频,并进行缓存,在有客户端链接后就会不断发送画面.